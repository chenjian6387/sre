# 06-6-模拟登录之web监控

# 1.什么是web监控

```
zabbix除了能通过
脚本+自定义key，实现服务器数据提取监控以外

也支持对网页的HTTP请求、响应监控。
```

# 2.web监控需求

```
以zabbix-UI页面的登录监控，模拟登录，输入账号密码，实现首页的健康监控。

1. 模拟登录输入zabbix账号密码，登录后台，如果登录失败就报警
2. 基于响应状态码判断 非200即报警
```

# 3.配置步骤

## 3.1 抓取HTTP数据包

```
既然是模拟登录，先抓包，查看zabbix登录的数据提交，通过浏览器开发者模式抓包
```

![image-20220704190949234](/ajian/image-20220704190949234.png)

```
确认登录提交的数据是
Admin
zabbix
```

## 3.2 创建web监控模板

![image-20220704200802799](/ajian/image-20220704200802799.png)

## 3.3 创建web检测场景

![image-20220704200850828](/ajian/image-20220704200850828.png)

创建web场景

![image-20220704200932502](/ajian/image-20220704200932502.png)

填写web检测场景，检测首页

![image-20220704201041927](/ajian/image-20220704201041927.png)

创建具体步骤，也就是填写登录的url，以及账号密码

![image-20220704201353218](/ajian/image-20220704201353218.png)

首页内容检测，以及响应状态码200判断

![image-20220704201517513](/ajian/image-20220704201517513.png)

务必点击添加，否则失效。

------

创建结果

![image-20220704201541996](/ajian/image-20220704201541996.png)

## 3.4 主机关联

![image-20220704201638865](/ajian/image-20220704201638865.png)

## 3.5 查看web检测数据

![image-20220704202237723](/ajian/image-20220704202237723.png)

------

查看最新数据，也可以看到web检测的数据

![image-20220704202339195](/ajian/image-20220704202339195.png)

## 3.6 模拟网站故障

```
为了方便，模拟密码输入错误即可，就不演示网站挂了
```

![image-20220704202500697](/ajian/image-20220704202500697.png)

------

![image-20220704202620516](/ajian/image-20220704202620516.png)

## 3.7 针对web检测的触发器

如果检测网站挂了，出问题， 如何报警？触发器来了

根据登录状态的key判断报警

```
正常登录是0
错误是1
```

![image-20220704202925730](/ajian/image-20220704202925730.png)

### 根据HTTP状态码监控，更通用

![image-20220704203308051](/ajian/image-20220704203308051.png)

------

模拟故障

![image-20220704203550908](/ajian/image-20220704203550908.png)

## 3.8 查看报警效果

![image-20220704203708301](/ajian/image-20220704203708301.png)

------

故障邮件以收到，抓紧去修复吧

![image-20220704204054867](/ajian/image-20220704204054867.png)
