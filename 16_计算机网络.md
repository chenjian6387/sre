# 02网络基础篇

学习Linux运维，除了要懂系统的知识，还要懂一点网络的基本知识。

因为我们服务器要配置网络，上网环境，以及部署网站，要懂得基本的网络协议，了解其中的网络通信原理、通信流程。并且学会抓取网络数据包，当网络访问出现问题时，或者访问很慢时，能够逐步的排查，找出问题。

# 前言

![image-20220120154626441](http://book.bikongge.com/sre/2024-linux/image-20220120154626441.png)![image-20220120154822897](http://book.bikongge.com/sre/2024-linux/image-20220120154822897.png)

> 计算机操作系统、计算机网络、这俩绝对是计算机专业学生的噩梦，因为他们都是相当的复杂，想要学习起来，必然、一定是非常艰苦的，这本书的厚度，谁看到都怕。
>
> 因此我们只能尽可能的提取重点，大致理解其中工作逻辑，能够应用在运维工作中即可。

# 怎么学网络篇（趣谈OSI模型）重要！！

观众朋友们，注意听超哥说，计算机网络说它难，是因为知识点实在是太多了，因为这是好多好多年，积攒而来的一大坨历史。

但是，你可以带着这个想法学习，==你就不想知道，你平时翻墙看的小电影，是怎么传输到你机器上的？==

> 以下重要！！！！！！！！！！！！
>
> 超哥这个解释，隔壁70岁的李老头都能学会。

1.计网的存在本质上是进行通信，是为了端到端之间的通信，所以首先你要考虑，网怎么设计。

2.很久很久以前，超哥家里有一个上网用的猫、并且电脑上还有一个拨号连接，那个年代，如果电脑上网，座机就没法用，那个时候网络是通过电路交换的，这个问题必然会被优化，解决。

3.后来的网络通信，也就是如今的因特网，都是使用数据报进行通信的，数据报就是你访问淘宝网，小电影网，人家网站是如何吧数据发给你的，这个数据遵循一定的传输格式。

4.问题来了，数据是如何传输的，本质上肯定是有物理电路，你得有机器，得有网卡，得插电，因此你需要==将数据转化为物理信号（物理层）==，因此网卡等硬件设备出现。

5.当你有了物理信号，下一步是不是考虑这个信号发给谁？，这个数据应该发给另外哪一台机器？

因此每一台机器都有网卡，都存再MAC地址，并且是全球唯一的[MAC地址](https://baike.baidu.com/item/MAC地址/1254181)，因此可以使用MAC地址来寻址，==因此数据链路层诞生了==。

```
windows
执行iconfig/all 查看物理地址(mac)
linux
    ipconfig 看ether 
     00:50:56:2e:6c:d
```

6.但是问题来了 ，上面这个MAC地址是无规律的，如果你有100、10000台机器，或者你要找到网络中的某一台机器，通过MAC来找到机器，这个寻找算法，恐怖到爆炸，根本无法直接使用mac来寻址。==因此IP地址出现了，网络层诞生了==

7.有了IP后，寻找机器就很容易了，但是超哥看小电影，从来都不会只找一个网站，那起码得打开五六个，同时访问，兄弟们是不是不懂于超老师在说什么？

因此这个通信过程就是并行通信，并且网站的数据发给你，可能要考虑数据完整性、比如一个电子邮件；也可能不在意完整性，就要求快，比如你看的小电影；==因此传输层的TCP、UDP协议诞生了。==

8.别急兄弟们，你以为到这就结束了吗？我们上网，需要发邮件，也可能要进行BT下载，也可能要用聊天软件，也可能要进行视频聊天，打游戏，各种需求对吗？

因此，在有了TCP、UDP传输层协议之后，又针对比如网站账户密码的验证、短点续传、比如网站数据的加密处理，以及我们使用的各种应用程序，这么多需求，后来依次出现了 ==会话层 > 表示层 > 应用层。==

## 网络故事继续

### 网络层次化

1.你现在有四台电脑，并且互相之间要互相通信，怎么做？

- 每一台都和其他三台连接起来吗？如果你现在有10台电脑，你的电脑上还有那么多接口吗？
- 又或者你现在搞一个小盒子，让这个小盒子帮你转发机器之间的数据？帮你通信？这个感觉不错，问题又来了，如果我有一万台电脑，一个小盒子能够吗？不够 ，因此我们可以准备多个小盒子，比如一个盒子连接100个电脑，然后小盒子之间再连接起来，是不就解决了。

这个连接电脑，小盒子之间的介质，比如电话线、网线、光纤。

![image-20220120173417621](http://book.bikongge.com/sre/2024-linux/image-20220120173417621.png)

你把电脑和小盒子连接这个称之为接入网，你会发现当网络中的机器数量太多，小盒子数量太多，就必然要进行分层了，这就是==网络的层次化==概念。

### IP、路由器、DHCP、NAT

刚才讲了，在整个网络环境中，电脑之间相互找到，得采用有规律的IP地址，谁帮你去干活，解析IP，找到目标机器的呢？就是==路由器==，你想，你在家上网，电脑是不是插在了路由器上？

- ==IP地址目前是IPv4==，并且被分成了五类（ABCDE），但是全世界有N台电脑，IP地址不够用啊，因此出现了==子网划分。==
- 回来说我们自己的电脑，问题是你电脑的IP是谁给你的，是你自己设置的吗？其实是有==DHCP(动态主机配置协议)==这个程序自动给你电脑分配了IP地址。
- 问题又来了，还是IP不够用的问题，因此后来诞生了局域网、公网的区别，因此==NAT（网络地址）==诞生了，专用网络不再占用公网IP数量。

### 专用网

专用网，说的是

- 局域网
  - 比如超哥家里有一个华为路由器，提供了一个局域网环境，在同一个WIFI下的设备，都能够互相通信。
  - 比如于超老师的所在的学校、教室，也是一个局域网。
  - 局域网用于较小规模的一个网络区域，通过某种介质互相连接的机器，比如打印机，台式机，笔记本，移动设备等。
- 广域网
  - 比如军队，铁路，交通，电力等单位，有自己超大的网络范围，跨城市，甚至国家，有自己专用的网络环境，是对外封闭的，也就是我们说的VPN。

### 局域网、交换机、MAC、NAT

于超老师所在的教室，是一个局域网环境，比如我们教室内的50个学生都要上网，学习，问题来了，路由器哪有50个接口让你插？这家伙，==交换机==这不就诞生了吗？

因为交换机有更多的插口，并且如果你不需要上外网，只要这50台机器内部局域网通信，就不需要路由器了，用交换机就好了。

交换机是基于MAC寻址的，因为局域网范围并不大，你比如超哥的教室就50个同学，找起来完全不费劲啊。

交换机是工作在一个叫做==ARP协议==上的，这个协议的作用是对IP和MAC的一个映射，并且ARP处在==链路层（MAC）和网络层（IP）之间的。==

那么问题又来了，你咋这么多问题？欠揍么不是？

你打我我也得问啊，为什么要用==ARP对IP和MAC的映射？==

因为在==应用层、传输层之==间，通信的目标地址都是IP地址，简单理解就是，你访问某个小电影的网站，那个网站的链接本质上是被解析为了IP地址，最终要解析为MAC地址，数据才发给了这个网站的服务器网卡。

最后一个问题超哥，我们教室内的同学，为什么能够访问www.yuchaoit.cn，因为==路由器提供了NAT。==

好，满足你，我继续讲。

![image-20220120183342841](http://book.bikongge.com/sre/2024-linux/image-20220120183342841.png)

NAT是**N**et **A**ddress **T**ranslation的缩写，即**网络地址转换**。

NAT部署在网络出口的位置，位于内网跟公网之间，是连接内网主机和公网的桥梁，双向流量都必须经过NAT，装有NAT软件的路由器叫NAT路由器，NAT路由器拥有公网IP。

你的家庭和办公网络环境大多是经过NAT路由中转的方式联网。这也意味着你在家PC通过WIFI联网，你在PC上通过命令行（ifconfig）查看到的IP地址（内网），跟通过baidu查看到的IP地址（公网），不一样，这也能证明你的PC处于NAT后面。

**NAT解决什么问题？**

NAT主要用来解决IPv4地址不够用的问题。

### 域名

最后，你还是不死心，冒着被打的风险，也要再问一句，于超老师，为什么你的网站叫做www.yuchaoit.cn，这个名字就能找到你的机器？

因为我如果告诉你我的机器IP地址是123.206.16.61，请问你能记得住吗兄弟。

因此DNS域名解析服务诞生了，它自动的帮助你，只要你访问www.yuchaoit.cn，就给它转换为了123.206.16.61，至于DNS是什么，超哥后面会详细，具体的给你讲，因为这是运维必须会的。

吸收理解下，兄弟们。

# 1、什么是通信

通信，指人与人或人与自然之间通过某种行为或媒介进行的信息交流与传递

从广义上指需要信息的双方或多方在不违背各自意愿的情况下采用任意方法，任意媒质，将信息从某方准确安全地传送到另方

通信在不同的环境下有不同的解释，在出现电波传递通信后，通信一般被理解为是信息的传递，由一个地方向另一个地方进行信息的传输与交换，目的在于传输消息。

通信在人类实践过程中，随着生产力的发展对传递消息的要求不断提升，人类通信文明不断进步

利用`电`传输消息的通信方式称为`电信`，这种通信具有迅速、准确、可靠等特点，并且不受时间、地点、空间、距离的限制

在古代，人类通过驿站、飞鸽传书、烽火报警、符号、身体语言、眼神、触碰等方式进行信息传递。

在现代科学水平的飞速发展，相继出现了无线电、固定电话、移动电话、互联网甚至视频电话等各种通信方式。通信技术拉近了人与人之间的距离，提高了经济的效率，深刻地改变了人类的生活方式和社会面貌 。

## 邮政通信

以实物传递为基础，虽然如今写信的人越来越少，但越简单越真实，越纯朴越真情，信件是信息传递最简单最纯朴的方式，更不因传递速度过快造成信息的溢漏；快递是人类社会发展的的需要，主要原因是因为随着人类物质生活水平的提高服务需求面也越来越高，但其发展受交通运输制约无便利的交通运输怎么也快不起来。

![image-20191209103445673](http://book.bikongge.com/sre/2024-linux/image-20191209103445673.png)

## 烽火台

烟墩，古代用于点燃烟火传递重要信息的高台，是古代重要的军事防御设施，是古代最老但是最有效的土电报，用于防止敌人入侵，有敌情则白天施烟，夜间则点火，台台相连，传递信号。

![image-20191209103501997](http://book.bikongge.com/sre/2024-linux/image-20191209103501997.png)

## 电话

电话分固定电话、移动电话与网络电话，其传递方式与网络方式优缺点基本相同，与网络方式不同之处在于电话不能直接传递文字图片，与邮递方式不同在于不能传递实物。

![img](http://book.bikongge.com/sre/2024-linux/1.gif)

## 传真

传真是近二十多年发展最快的非话电信业务。将文字、图表、相片等记录在纸面上的静止图像，通过扫描和光电变换，变成电信号，经各类信道传送到目的地，在接收端通过一系列逆变换过程，获得与发送原稿相似记录副本的通信方式，称为传真。

传真的主要技术有：扫描技术，记录技术，同步同相技术，传输技术。传真的通信过程包含扫描，光电变换，图像信号的传输，记录变换，收信扫描和同步同相。

传真是基于PSTN的电信信号通过设备中转传真信号。直接由于科技大迅速发展，电子网络传真逐渐成为取代传真机的新一代通信工具。

![img](http://book.bikongge.com/sre/2024-linux/2.gif)

## 电报

电报，就是用电信号传递的文字信息。通讯越来越迅捷，电报的作用已经不是很大了，也许有一天电报就会从我们的生活中消失了。

电报是通信业务的一种，是最早使用电进行通信的方法。它利用电流(有线)或电磁波(无线)作载体，通过编码和相应的电处理技术实现人类远距离传输与交换信息的通信方式。

电报大大加快了消息的流通，是工业社会的其中一项重要发明。早期的电报只能在陆地上通讯，后来使用了海底电缆，开展了越洋服务。到了二十世纪初，开始使用无线电拍发电报，电报业务基本上已能抵达地球上大部份地区。电报主要是用作传递文字讯息，使用电报技术用作传送图片称为传真。

![img](http://book.bikongge.com/sre/2024-linux/3.gif)

## 计算机

计算机通信是面向计算机和数据终端的一种现代通信方式．可以实现计算机与计算机、人与计算机之间数据信息的生成、存储、处理、传递和交换从计算机应用的广泛与深入的角度出发。

要求处于不同地理位置的计算机系统之间能够交换消息。共享资源．以至协同工作，更好地完成给定的任务。

# 2、计算机网络导学

- ==计算机网络学习的核心内容就是网络协议的学习。==
- 网络协议是为计算机网络中进行数据交换而建立的规则、标准或者说是约定的集合。
- 因为不同用户的数据终端可能采取的字符集是不同的，两者需要进行通信，必须要在一定的标准上进行。

> 一个很形象地比喻就是我们的语言，我们大天朝地广人多，地方性语言也非常丰富，而且方言之间差距巨大。
>
> A地区的方言可能B地区的人根本无法接受，所以我们要为全国人名进行沟通建立一个语言标准，这就是我们的普通话的作用。
>
> 同样，放眼全球，我们与外国友人沟通的标准语言是英语，所以我们才学习英语。

![image-20220119142500161](http://book.bikongge.com/sre/2024-linux/image-20220119142500161.png)

计算机网络协议同我们的语言一样，多种多样。

目前TCP/IP协议已经成为Internet中的"通用语言"，下图为不同计算机群之间利用TCP/IP进行通信的示意图。

![image-20220120150140134](http://book.bikongge.com/sre/2024-linux/image-20220120150140134.png)

## 网络构成要素

构建网络所需的硬件一般包括交换机、路由器等网络硬件，以及个人计算机、服务器等计算 机硬件，这些硬件统称为节点，节点之间可以通过链路进行连接。

![image-20220121095947968](http://book.bikongge.com/sre/2024-linux/image-20220121095947968.png)

| 节点（node）     | 计算机、交换机、路由器等构成网络的硬件均可称为通信 节点      |
| ---------------- | ------------------------------------------------------------ |
| 链路(link)       | 泛指将各个节点进行连接的逻辑线路，物理上可以使用有 线线缆或者无线电波 |
| 主机（host）     | 通过网络为其他机器提供服务的计算机，也称为服务器             |
| 客户端（client） | 指从主机处获得服务的计算机（如个人计算机等），也称为 终端或者Terminal |

## LAN和WAN

![image-20220121100152601](http://book.bikongge.com/sre/2024-linux/image-20220121100152601.png)

在家庭、学校内构建的局域网环境，叫做（Local Area Network、本地网、局域网），也就是你家里的路由器，你的笔记本，台式机应该通过`网线`，插在这个LAN口，这下是不是明白为什么了。

而这个WAN口，一般都是和网络运营商提供给你的猫连接在一起，也就是外部的互联网，是从这里连接的。

WAN是英文Wide Area Network的首字母所写，即代表广域网；

![image-20220121100624453](http://book.bikongge.com/sre/2024-linux/image-20220121100624453.png)

## 网络层次划分（重要OSI七层模型）

==为了使不同计算机厂家生产的计算机能够相互通信，以便在更大的范围内建立计算机网络==，国际标准化组织（ISO）在1978年提出了"开放系统互联参考模型"

即著名的`OSI/RM模型（Open System Interconnection/Reference Model）。`

它将计算机网络体系结构的通信协议划分为七层。

![image-20220120151241369](http://book.bikongge.com/sre/2024-linux/image-20220120151241369.png)

==其中第四层完成数据传送服务，上面三层面向用户。==

![image-20191209134336149](http://book.bikongge.com/sre/2024-linux/image-20191209134336149.png)

网络体系结构分层

![image-20191209134411108](http://book.bikongge.com/sre/2024-linux/image-20191209134411108.png)

## 计算机网络组成

不同的人对计算机网络有不同的定义。

目前得到普遍认可的定义是：**所谓计算机网络，是指一些互相连接、自治的计算机的几何**。

也许这样说有些抽象。那我们可以简单理解下。“**互连**”就是指连接的两台或者两台以上的计算机能够互相交换信息，达到资源共享的目的。

而“**自治**”则意味着每台计算机的工作是独立的。任何两台计算机之间不存在主从关系。

今天，我们简单了解下计算机网络的组成。

计算机网络有**网络硬件**和**网络软件**两部分组成。

==硬件是网络运行的实体，软件则是支持网络运行、开发网络资源使用效率，挖掘网络潜力的工具。==

## 计算机网络的作用(重要)

**1、数据通信**

信息化时代的到来，改变了人们的生活方式。社交软件、远程传输文件软件等都利用了计算机网络。

人们用U盘很少了，发文件，微信发送，QQ发送。

Excel、word都进行云协作，这些功能的根本，在于云计算+网络。

计算机网络的数据通信功能，可以对分散的对象进行实时的、集中的跟踪管理与监控。

除此之外，计算机网络还可以给科学家和工程师们提供一个网络环境，在此基础上可以建立一种新型的合作方式——计算机支持协同工作。

**2、资源共享**

资源共享是计算机网络最基本的功能之一，也是早期建网的初衷。

在计算机网络中，资源包括**软件资源**及要传输和处理的**数据信息资源**。

网络中某些计算机及外围设备价格昂贵，如巨型计算机、激光打印机等，采用计算机网络进行资源共享可以减少硬件设备的重复购置，从而提高设备的利用率。

软件共享避免了软件的重复购置或重复开发，通过实现分布式的计算和存储方式，使某一软件可以全网共享，从而降低成本。

用户数据是非常有价值的资源，也可以通过计算机网络进行共享。

**3、提高可靠性**（服务器集群）

在一个单机系统中，如果某个部件或者计算机发生故障，则必须通过替换资源来维持系统的继续运行。否则系统无法正常工作。

在计算机网络中，设备是彼此相连的。如果一个设备出现故障，可以通过网络寻找其他机器来代替本机工作。

每种资源可以存放在多个地点，用户可以通过多种途径来访问网内的某个资源，从而避免了单点失效对设备产生的影响。

**4、提高系统处理能力**（集群、高性能计算）

单机的处理能力是有限的。

从理论上来讲，同一网内的多台计算机可以通过协同操作和并行处理来提高整个系统的处理能力，并使网内各计算机负载均衡。

当网络中某一台计算机的处理负担过重时，可以将其作业转移到其他空闲的机器上去执行，从而提高系统的利用率，增加整个系统的利用率。

**5、分布式处理**（分布式计算）

在计算机网络中，可以将某些大型处理任务分解为多个小型任务，从而分配给网络中的多台计算机处理，如分布式数据库系统。

计算机网络技术还可以把许多小型机或微机连接成具有大型机处理能力的高性能计算机系统。

其实，从应用角度来阐述，计算机网络还有许多其他功能。

我相信，随着网络技术的不断发展，各种网络应用将会层出不穷。那时，计算机网络的更多功能也会被人们发现和认可。

## 网络硬件

计算机网络的组建过程中，涉及到的**网络硬件**可以分为四类。分别是：**计算机设备、网络接口设备、传输媒体和网络互连接设备**。

### **1、计算机设备**

计算接设备按照在网络服务中扮演的角色，可以分为**网络服务器**和**网络工作站**两部分。

- 在计算机网络中，分散在不同地点承担有一定的数据处理人物并且负责提供资源的计算机设备称为**服务器**。
- 服务器是网络运行、管理和提供服务的中枢，是网络系统中的重要组成部分，她直接影响着网络的整体性能。
- 一般采用具有较强的计算能力和较大的存储能力的高档计算机做服务器。

![image-20220119143255028](http://book.bikongge.com/sre/2024-linux/image-20220119143255028.png)

在计算机网络中，只向服务器提出请求而不为其他计算机提供服务的计算机设备称为**工作站**。

工作站通过网络接口设备连接到网络上，它保持原有计算机的功能，作为独立的个人计算机为用户服务，同事有可以按照被授予的权限访问服务器。

工作站之间可以进行通信，也可以共享网络资源。

> 终端是另一种形式的工作站。
>
> 简单总结，我们平时使用的个人笔记本+xshell软件，连接上阿里云服务器，这就是一个终端。
>
> 终端有这几类，你未来会接触到（终端就是用于连接服务端的）
>
> - 个人机器远程连接
> - 你去机房，直接打开命令行操作服务器

### **2、网络接口设备**

网络接口设备是连接计算机设备与传输媒体的设备，常用的网络接口设备有**网络接口卡、调制解调器**等。

**网络接口卡**简称网卡或者网板，也称为网络接口适配器。

网卡的主要功能是进行信息收发和编码转换。

在接收传输媒体上发送信息时，网卡把传来的信息按照网络上信号编码要求交给主机处理；在主机向网络发送信息时，网卡把发送的信息按照网络传送的要求配成帧的格式，然后采用网络编码信号向网络发出。

不同的类型有不同的网卡，常见的网卡有以太网卡、无线网卡、USB网卡。

![image-20220119144705654](http://book.bikongge.com/sre/2024-linux/image-20220119144705654.png)

**调制解调器**是调制器和解调器的简称，俗称“猫”。

调制解调器是实现计算机通信的外部设备，主要功能是实现数字信号与模拟信号之间的转换。

调制解调器按照外观可分为内置式、外置式、和PC卡式。

![image-20220119144730586](http://book.bikongge.com/sre/2024-linux/image-20220119144730586.png)

### **3、传输媒体**

传输媒体也成为传输机制或传输媒介，它负责将计算机网络中的多种设备连接起来，提供数据传输的物理通道。

传输媒体可以分为两大类：**导向传输**和**非导向传输**。

==导向传输媒体包括**双绞线、同轴电缆**和**光缆**等；而非导向传输媒体包括无线电、微波和卫星通信等。==

**双绞线**也称为双纽线，是一种最古老也最常用的传输媒体。

==也就是我们最常见的网线，内部的线对是按逆时针方向紧密的缠绕在一起的，两两相互缠绕的做法有利于减低内部的串扰和减少外部的干扰==

双绞线分为非屏蔽双绞线和屏蔽双绞线两种。

![image-20220119144930666](http://book.bikongge.com/sre/2024-linux/image-20220119144930666.png)

**同轴电缆**是一种由地不对称的同轴管构成的通信回路，它由内导体铜质芯线、绝缘体、网状编织的外导体屏蔽层以及塑料保护外层所组成。

**光缆**由一组光纤加包带层和外护套组成。

光纤分为多模光纤和单模光纤两类。

**无线传输媒体**利用无线电波在自由空间的传播来实现信息的传输，长用在有线铺设不便的特殊地理环境，或作为地面通信系统的备份和补充。

### **4、网络互连设备**

网络互连设备是计算机网络的重要组成部分，它们用于将主机连接成网络，也用于将不同的网络互连起来。

**中继器、网桥、路由器**和**网关**是四种最基本的网络互连设备。在实际组网中，还会用到**集线器、无线接入点**和**交换机**等组网设备，它们属于某种基本网络互连设备的变形。

![image-20220119145109009](http://book.bikongge.com/sre/2024-linux/image-20220119145109009.png)

## 网络软件

网络软件是实现网络功能不可缺少的软环境，网络软件通常包括网**络操作系统、网络协议软件、网络应用软件和网络管理软件**等。

**1、网络操作系统**

网络操作系统是为使网络用户能方便而有效地共享网络资源而提供的各种服务的软件及相关规程的集合，它直接运行在网络硬件基础之上。

==网络操作系统是网络的核心，其他网络软件需要网络操作系统的支持才能运行。==

常见的操作系统有UNIX，Windows，Linux等。

![image-20220119145427593](http://book.bikongge.com/sre/2024-linux/image-20220119145427593.png)

**2、网络协议软件**

连接到计算机网络上的计算机依靠网络协议才能进行相互通信，而网络协议要依靠具体的网络协议软件的运行支持才能工作。

网络管理软件和网络应用软件都要通过网络协议软件才能发生作用。

网络协议软件有很多，TCP/IP、IEEE 802系列协议等均有各自对应的协议软件。

**3、网络应用软件**

网络应用软件是在网络环境下直接面向用户的软件。

计算机网络通过网络应用软件为用户提供信息资源的传输和共享服务。

网络应用软件可分为两类：一类是由网络软件厂商开发的通用应用工具；一类是基于不同的用户业务的软件。

有哪些软件？

- 如浏览器，就是一个网络应用软件
- QQ
- 微信
- 文件传输工具

![image-20220119150643898](http://book.bikongge.com/sre/2024-linux/image-20220119150643898.png)

网卡是硬件、结合网络连接软件，共同为用户提供网络传输功能。

1.读入其他网络设备传过来的数据包，然后拆包，将其变为本机可以看得懂的数据.

2.把本机的数据，打包后，发送给网络中的其他设备。

# 3、计算机网络分类

计算机网络根据不同的标准可以分为不同的类别。常见的分类有如下四种。

**一、按照网络的覆盖范围进行分类**

从网络的覆盖范围进行分类，计算机网络可以分为局域网、广域网和城域网。

## 1、局域网

局域网是在局部区域范围内将计算机、外设和通信设备通过高速通信线路互连起来的网络系统。

常见于一栋大楼、一个校园或一个企业内。

局域网所覆盖的区域范围较小，一般为几米甚至十几公里，但其连接速率较高。

局域网在计算机数量配置上没有太多的限制，少的可以只有两台，多的可达上千台。

> 局域网是最常见、应用最为广泛的一种网络，其主要特点是覆盖范围较小，用户数量少，配置灵活，速度快，误码率低。

### 无线局域网

> 无限局域网，是目前很主流的形式了。
>
> 无线局域网与传统的局域网主要不同之处就是传输介质不同，传统局域网都是通过有形的传输介质进行连接的，如同轴电缆、双绞线和光纤等，而无线局域网则是采用空气作为传输介质的。
>
> 正因为它摆脱了有形传输介质的束缚，所以这种局域网的最大特点就是自由，只要在网络的覆盖范围内，可以在任何一个地方与服务器及其它工作站连接，而不需要重新铺设电缆。

![image-20220119152223988](http://book.bikongge.com/sre/2024-linux/image-20220119152223988.png)

**2、广域网**

广域网也称为远程网，所覆盖的地理范围可从几十平方公里到几千平方公里，它一般是将不同城市或不同国家之间的局域网互联起来。

广域网是由终端设备、结点交换设备和传送设备组成的，设备间的连接通常是租用电话线或用专线建造的。

**3、城域网**

城域网的覆盖范围在局域网和广域网之间，一般来说，是将一个城市范围内的计算机互联，这种网络的连接距离约为10~100公里。

城域网在地里范围上可以说是局域网的延伸，连接的计算机数量更多。

![img](http://book.bikongge.com/sre/2024-linux/1570875565.jpg)

> 局域网 > 城域网 > 广域网

![img](http://book.bikongge.com/sre/2024-linux/1570875374.png)

> 比如超哥的公司总部在北京，分公司遍布全国各地，如果将全国所有的分公司都通过网络连接起来，一个分公司就是一个局域网，整个企业的网络就是一个广域网。

## 2、从网络的连接范围进行分类

从网络的连接范围进行分类，计算机网络可以分类互联网、内联网和外联网。

**1、互联网**

互联网是指将各种网络连接起来形成的一个大系统，在该系统中，任何一个用户都可以使用网络的线路或资源。

**2、内联网**

内联网是基于互联网的TCP/IP协议，使用WWW工具，采用防止入侵的安全措施，为企业内部服务，并有链接互联网功能的企业内容网络。

内联网是根据企业内部的需求设置的，它的规模和功能是根据企业经营和发展的需求而确定的。

可以说，内联网是互联网更小的版本。

**3、外联网**(VPN)

外联网是指基于互联网的安全专用网络，其目的在于利用互联网把企业和其贸易伙伴的内联网安全地互连起来，在企业和其贸易伙伴之间共享信息资源。

# 4、计算机网络拓扑

前面我们介绍了计算机网络常见的几种分类。我们了解下常见的网络拓扑结构。

网络拓扑是由网络结点设备（包括计算机设备和网络互连设备）和传输媒体构成的网络结构图。

采用拓扑学的方法，将网络单元抽象为“点”，传输媒介抽象为“线”，这样计算机网络系统就变成了由“点”和“线”组成的几何图形。

这种采用拓扑学方法抽象出的网络结构就成为计算机网络的拓扑结构。

==常见的计算机网络的拓扑结构有**总线结构、环状结构、星状结构、树状结构、网状结构及复合型结构**。==

## 总线结构

总线结构是通过一条通信线路将所有的入网计算机连接起来，从而形成一条共享的信道，这条共享信道就称为总线。

- 多台机器公用一条传输信道，信道利用率较高，成本低；
- 连接数有线，传输速度上，因为用户增加而下降。
- 同一时刻只有两台机器通信，其他机器得等待；
- 某个机器损坏不影响整体，但是如果总线断了，整个网络环境就瘫痪。

> 简单理解，一根绳上的蚂蚱，总线结构。

![image-20220119161008101](http://book.bikongge.com/sre/2024-linux/image-20220119161008101.png)

总线型结构就像一张树叶,有一条主干线,主干线上面由很多分支.

缺陷：一切的数据都需经过总线传送，总线成为整个网络的瓶颈；呈现毛病诊断较为困难。

别的，由于信道同享，衔接的节点不宜过多，总线自身的毛病能够导致体系的溃散。

最著名的总线型结构结构是以太网（Ethernet）。

## 环状结构

环状网络是将入网计算机通过通信线路连接起来形成一个闭合的环。

在该拓扑中，线路是公用的，数据一般按固定方向单向流动，每个收到数据包的结点都向它的下游结点转发该数据包。数据包在环上旅行一圈，最后由发送结点回收。

环形结构各结点经过通信线路组成闭合回路，环中数据只能单向传输，信息在每台设备上的延时时刻是固定的。特别合适实时操控的局域网体系。

环形结构就如一串珍珠项圈,环形结构上的每台计算机便是项圈上的一个个珠子.

![image-20220119161120923](http://book.bikongge.com/sre/2024-linux/image-20220119161120923.png)

特点

- 单个环网的节点数量有限；
- 某个单点故障，导致整个网络环境瘫痪。

长处：结构简略，合适运用光纤，传输间隔远，传输推迟确认。

缺陷：环网中的每个结点均成为网络牢靠性的瓶颈，恣意结点呈现毛病都会形成网络瘫痪，别的毛病诊断也较困难。最著名的环形结构网络是令牌环网（Token Ring）

## 星状结构

星状结构中，每一个计算机都通过单一的通信线路与中心交换结点直接相连。

在该拓扑结构中，中心交换结点是唯一的转换结点。

其他结点中间的通信必须通过中心交换结点转发。

星型结构是一种以中央节点为中心，把若干外围节点衔接起来的辐射式互联结构。

这种结构适用于局域网，特别是近年来衔接的局域网大都选用这种衔接方法。这种衔接方法以双绞线或同轴电缆作衔接线路。

![image-20220119161201707](http://book.bikongge.com/sre/2024-linux/image-20220119161201707.png)

特点

- 集中式管理机器；
- 每一个节点通信必须通过中心点连接，线路利用率低；
- 中心点压力很大，因为任意两台节点数据交换，必须经过中心点；
- 某个机器挂掉不影响整体，中心点挂掉，网络直接瘫痪。

![image-20220119154446560](http://book.bikongge.com/sre/2024-linux/image-20220119154446560.png)

长处：结构简略、简略完成、便于办理，通常以集线器（Hub）作为中央节点，便于网络保护。

缺陷：中心结点是全网络的牢靠瓶颈，中心结点呈现毛病会导致网络的瘫痪。

## 树状结构

树状结构是星状结构的一种变形。

树状结构采用了分层结构，即将原来用单独通信线路直接连接的结点通过多层交换结点进行分层连接。

树状拓扑结构也具有一定的集中控制功能，该拓扑中除了最下层叶子节点之外的所有根节点和子树节点都是转接节点，可以为其他节点转发数据。

树形拓扑结构是一种层次结构，结点按层次连结，信息交流首要在上下结点之间进行，相邻结点或同层结点之间一般不进行数据交流。

树形拓扑结构是便是数据结构中的树。

![image-20220119155754130](http://book.bikongge.com/sre/2024-linux/image-20220119155754130.png)

特点：

- 比星状结构更容易扩展，容易故障隔离
- 其余和星状一样

长处：连结简略，保护方便，适用于聚集信息的运用要求。

缺陷：资源同享能力较低，牢靠性不高，任何一个工作站或链路的毛病都会影响整个网络的运行。

## 网状结构

网状结构，又称为分布式结构，是由分布在不同地点并且具有多个终端的结点机相互连接而成的。

网状而机构又分为全连接网状结构和不完全连接网状结构两种形式。

在全连接网状结构中，每一个结点与网中的其他结点均通过通信线路连接。

在不完全连接网状机构中，两个结点之间不一定有直接通信线路连接，它们之间的通信需要通过其他结点转接。

![image-20220119161418767](http://book.bikongge.com/sre/2024-linux/image-20220119161418767.png)

长处：体系牢靠性高，比较简略扩展，可是结构复杂，每一结点都与多点进行连结，因而有必要选用路由算法和流量操控方法。

现在广域网基本上选用网状结构。

星型网络拓扑结构在以上几种网络拓扑结构中运用最多，结构简略，便于办理的特色，深受网络办理者的认可。

## 对比

![image-20220119161740652](http://book.bikongge.com/sre/2024-linux/image-20220119161740652.png)

# 5、网络硬件设备（重点）

![image-20220119175241025](http://book.bikongge.com/sre/2024-linux/image-20220119175241025.png)

> 大家在跟着于超老师学习linux时，通过vmware搭建环境，有没有考虑过，你的这个（假的机器）vmware，以及安装好的linux系统，是怎么上网的？

## 网卡、网线

==第一步，机器上插入网卡==

机器上要`插网线`上网，都得安装`网卡`，都是`以太网网络接口`。

每一个以太网适配器（网卡）都有一个插孔，用于接收传输数据的电缆，电缆将计算机连接到集线器、交换机、或者路由器上。

电缆可能由铜线或光缆制成。

> 通常的光纤以太网卡用于特殊情况，比如需要严格的网络环境，抗电器干扰，以及超远距离时，采用光纤。
>
> 大多数计算机都会内置==以太网网络适配器==，没有的话，可以额外添加即可。

![image-20220119172510926](http://book.bikongge.com/sre/2024-linux/image-20220119172510926.png)

一般的网络计算机课程，都主要围绕着网络协议展开讲解，但是物理层面也是非常重要的，你要知道，一切的软件技术，在断电、断网等物理攻击下，都是渣渣。。

### 关于网线

==老鼠攻击==

大家不要觉得于超老师在开玩笑，老鼠攻击是很常见的事情。

你要说交换机等网络设备自然瘫痪，机会较小，而光纤和网线被老虎咬坏是挺常见的。

一些环境比较简陋的机房，很有可能就有老鼠，机房经常能看到老鼠屎，甚至要请灭鼠专家去打。

![image-20220119175622854](http://book.bikongge.com/sre/2024-linux/image-20220119175622854.png)

因此标准的机房线缆是要走桥架或者管线的，都是为了降低物理故障。

![image-20220119180103916](http://book.bikongge.com/sre/2024-linux/image-20220119180103916.png)

> 多年前的支付宝崩溃事故
>
> 支付宝的技术，全世界也能排得上名号，但是。

![image-20220119180227624](http://book.bikongge.com/sre/2024-linux/image-20220119180227624.png)

其他人为物理层攻击，更是多不胜数，所以等级保护中，物理安全放在第一位。

防火墙、入侵检测买得再多，机房没没锁，黑客把你服务器抱走了，也只能两眼泪汪汪。

常见网络传输介质有：同轴电缆、双绞线、光纤，下面我们将一一为大家分享这三种传输介质特点与应用场景。

#### 同轴电缆

同轴电缆曾经是网络传输的主要介质，随着时代发展，现在已经渐渐淘汰。

在模拟监控中还有部分应用，当然现在模拟监控也越来越少了。

如图，早年使用同轴电缆组网的以太网：

![image-20220119180709110](http://book.bikongge.com/sre/2024-linux/image-20220119180709110.png)

如图所示，同轴电缆由内部铜芯、绝缘层保护、外导体（屏蔽层）、外层绝缘体/保护层组成，可用于模拟监控、模拟广播。

#### 双绞线

双绞线是由多组绝缘铜导线相互缠绕而成的线缆，双绞线内部介质也是铜线，内部传输为电信号，根据电磁原理，变化的电流会产生磁场，缠绕目的是：两两抵消磁场，降低信号干扰。

![image-20220119180811668](http://book.bikongge.com/sre/2024-linux/image-20220119180811668.png)

最早双绞线只有2芯，用于电话数据传输，现在已经淘汰，目前主流的双绞线都是4对8芯，但需要注意：

双绞线传输速率100M—用到4根，2对（1、2、3、6）

双绞线传输速率1000M—使用8根（全部使用）

#### **屏蔽双绞线和非屏蔽双绞线**

双绞线可以分为屏蔽双绞线和非屏蔽双绞线，前者由锡箔保护层，能有效防止数据泄密，同时降低外部环境对数据传输的干扰，我们日常项目中使用最多的是非屏蔽双绞线，价格较低。

![image-20220119181020809](http://book.bikongge.com/sre/2024-linux/image-20220119181020809.png)

#### **给大家分享两个小故事**

1. 某航天科工企业，发送火箭，如果内部传送数据由于干扰，有0.01度的偏差，导弹从中国打到美国，可能就偏离了目标几百公里。故此类高可靠场景，肯定要用屏蔽双绞线，防止外部环境对内部数据产生干扰。
2. 分享一个安全厂商朋友介绍的案例：我国新一代歼击机G20，所有图纸、性能材料都被美国窃取了，窃取的方式也很简单，开车绕成都飞机工业集团（后面简称成飞）绕了两圈。核心原理是：G20数据在内网通过网线传输，传输的是电信号，由于电磁感应，会产生磁场，美国人正是分析磁场，逆向得出网络里传输的数据，听起来不可思议吧！如果有兴趣，去百度一下“震网事件”，看美国人怎么一步步干掉伊朗核设备，那更不可思议。

说了这么多，如果成飞采用了屏蔽双绞线，那么美国佬想窃取数据，就没那么容易了。

所以很多涉密场景，会使用屏蔽双绞线、屏蔽机柜、屏蔽机房、红黑电源。

没出问题，看来这些操作很麻烦，多此一举，但很多行业出了问题，那就是大问题，掉帽子，掉脑袋的问题！

#### 光纤

光纤是一种传输工具，就如同一根细细的塑料丝，很细的光纤会被封装在塑料套中，用作长距离的信息传递。所以光缆是包含光纤的。

![image-20220119194146006](http://book.bikongge.com/sre/2024-linux/image-20220119194146006.png)

光纤是利用光在玻璃或塑料纤维中的全反射原理而达成的光传导工具。

光在光导纤维的传导损耗比电在电线传导的损耗低得多，光纤被用作长距离的信息传递。

光纤特点：重量轻，体积小、传输远（衰减小）、容量大、抗电磁干扰。

> 光缆一般由多根光纤和塑料保护套管及塑料外皮构成。
>
> 光缆是由一定数量的光纤组成缆芯，外面包裹有护套和保护层，用于通讯，远距离大容量信息传输。

![image-20220119194241290](http://book.bikongge.com/sre/2024-linux/image-20220119194241290.png)

光纤长什么样

![image-20220119181720804](http://book.bikongge.com/sre/2024-linux/image-20220119181720804.png)

1.光纤盒，光纤宽带接入设备，你可能在村里见过这个设备。

![image-20220119182042366](http://book.bikongge.com/sre/2024-linux/image-20220119182042366.png)

光纤箱

![image-20220119182104358](http://book.bikongge.com/sre/2024-linux/image-20220119182104358.png)

家庭光猫

![image-20220119182144352](http://book.bikongge.com/sre/2024-linux/image-20220119182144352.png)

### 虚拟网卡

==第二步，安装vmware，会自动安装好，虚拟以太网适配器==

机器上安装的网卡是硬件，操作系统上与之对应工作的是以太网适配器，作用是将机器和局域网（LAN）连接，进行网络数据传输。

> （以太网适配器，以下统称网卡）

有两个是vmware安装的虚拟网卡

![image-20220119170617475](http://book.bikongge.com/sre/2024-linux/image-20220119170617475.png)

不论是局域网、城域网还是广域网，在物理上通常都是由“网卡、集线器、交换机、路由器、网线、RJ45接头(水晶头)”等网络连接设备和传输介质组成的。

网络设备及部件是连接到网络中的物理实体，种类繁多，基本的网络设备有“计算机（无论是个人电脑或服务器）、中继器、集线器、路由器、交换机、防火墙、网桥、网关、网卡（NIC）、打印机、调制解调器、光纤收发器、光缆”等。

![常见的网络设备有哪些？你都认识几个？](http://book.bikongge.com/sre/2024-linux/1571048682.jpg)

## 服务器 Server

服务器是计算机网络上最重要的设备。

服务器，指的是在网络环境下运行相应的应用软件，为网络中的用户提供共享信息资源和服务的设备。服务器的构成，与PC机（个人电脑）基本相似，有“处理器、内存、硬盘、网卡、系统总线”等。

但服务器是针对具体的网络应用特别制定的，因此服务器与PC机（个人电脑）在处理能力、稳定性、可靠性、安全性、可扩展性、可管理性等方面存在着很大的差异。

通常情况下，服务器比PC机（个人电脑）拥有更强的处理能力、更多的内存和硬盘空间。服务器上的网络操作系统，不仅可以管理网络上的数据，还可以管理用户、用户组、安全组和应用程序等。

服务器是网络的中枢和信息化的核心，具有“高性能、高可靠性、高可用性、I/O吞吐能力强、存储容量大、联网和网络管理能力强”等特点。

![image-20220119164239813](http://book.bikongge.com/sre/2024-linux/image-20220119164239813.png)

服务器的选择：

1、性能要稳定。为了保证网络能正常运转，所选择的服务器首先要确保稳定性。另一个方面，性能稳定的服务器意味着能为公司节省维护费用。

2、要考虑扩展性，为了减少更新服务器带来的额外开销和对工作的影响，服务器应当具有较高的可扩展性，可以及时升级或调整配置来适应发展。

3、便于操作和管理。

4、能满足特殊要求。

5、硬件搭配要合理。为了能使服务器更加高效地运行，要确保所购买的服务器的内部配件的性能必须合理搭配。

## 集线器 Hub

集线器（即HUB，物理层设备）是一种==将多条双绞线或光纤==集合连接在同一段物理介质下的设备，通常工作在物理层（即OSI参考模型第一层），用于连接局域网段。

集线器拥有多个端口，当其中一个端口接收到信号后，会将衰减的信号整形放大，然后再将放大的信号广播转发给其他所有端口，以便局域网的所有段都可以看到数据包。（集线器不知道这数据包该发给谁）

> 特点：
>
> 1.扩大网络的传输范围，是一个标准的共享式设备，增加网络内的节点；
>
> 2.==所有端口共享一条带宽，同一时刻只能有2个端口能传送数据，其他端口只能等待，传输效率很低，比如有一个集线器有8个口，每个口只有1/8的带宽。==
>
> 3.无法保证数据传输的完整性和正确性
>
> 因此已被淘汰，是一个笨蛋网络设备，只起到了信号放大和传输的作用。

![集线器.gif](http://book.bikongge.com/sre/2024-linux/_1587827223_X7HJK4PVZ2.gif)

==**工作过程：**集线器的工作过程是非常简单的，它可以这样的简单描述：首先是节点发信号到线路，集线器接收该信号，因信号在电缆传输中有衰减，集线器接收信号后将衰减的信号整形放大，最后集线器将放大的信号广播转发给其他所有端口。==

![image-20220120151758743](http://book.bikongge.com/sre/2024-linux/image-20220120151758743.png)

> 为什么集线器被淘汰
>
> 一个比较严重的问题是，如果一个大型的局域网，比如有500台机器，全部用HUB连接的，后果会怎么样呢？？相当慢，网络的效率极差！
>
> 为什么？如果500台机器都发一个包，那就是说每台机器，都需要接收差不多499个无用包...并且如果是需要回应的话......无用的数据包会充斥着整个的局域网，这就是传说中的广播风暴！
>
> 为了减少广播风暴，网桥产生了。

## 中继器

在介绍网桥之前，还想简单介绍另一个物理层的设备：“中继器”，这种设备的作用是把物理层传输的信号放大，由于长距离的传输，信号会有一定的损耗的，这种设备主要解决的就是这个问题。

比如在地铁，商场底下等信号环境很差的地方，就需要用中继器，放大信号。

> 所以中继器就是一个信号增强设备，并且属于OSI模型的第一层、物理层，它的功能就是将被噪声影响的信号，重新输出，没有任何数据上的控制。

![image-20220119204528725](http://book.bikongge.com/sre/2024-linux/image-20220119204528725.png)

中继器

![image-20220119204702723](http://book.bikongge.com/sre/2024-linux/image-20220119204702723.png)

信号在传输过程中会不断衰减，为了不让信号衰减对通信产生影响，产生了中继器：仅做放大信号用，把信号传导偏远的地方。

它和HUB的区别是：HUB主要是为了在物理层上转发数据的，所以它不关心电压值的大小，也不会放大物理信号；

而中继器它的作用就是为了放大信号用的。

## 网桥

理解“网桥”的含义

也有人把“网桥”比喻成一个聪明的中继器（Repeater）。因为中继器只是对所接收的信号进行放大，然后直接发送到另一个端口连接的电缆上，主要用于扩展网络的物理连接范围；

而网桥除了可以扩展网络的物理连接范围外，还可以对MAC 地址进行分区，隔离不同物理网段之间的碰撞。

> 集线器和中继器都是物理层设备，而**网桥属于二层设备**。

==网桥又称桥接器，英文名Network Bridge，**数据链路层设备**。它也是转发数据包的设备，但和HUB不一样的是，它工作在数据链路层，HUB只能看懂物理层上的东西（比如一段物理信号），网桥却能看懂一些帧的信息（在链路层上，把上面传下来的数据封装后，封装好了的数据就是帧，但这里我用“数据包”这样的泛指去代替“帧”这个专业术语）。==

![image-20220120152200385](http://book.bikongge.com/sre/2024-linux/image-20220120152200385.png)

## 交换机

交换机是种用于光/电信号转发的网络设备，通常工作在数据链路层或网络层（即OSI参考模型的第二层和第三层），支持各种数据包协议。

> 特点：
>
> 交换机的每一个端口所连接的网络都是独立的，独享带宽；
>
> 交换机能够进行地址学习，记录源端口、目标端口的MAC地址，维护一个MAC地址表；
>
> 隔离冲突域，每个端口工作时，不影响其他端口的工作。

![image-20220121140150237](http://book.bikongge.com/sre/2024-linux/image-20220121140150237.png)

主要用于根据MAC地址进行数据的转发和交换。

![交换机.gif](http://book.bikongge.com/sre/2024-linux/_1587827248_QTZVoO2Ok4.gif)

> 交换机在数据链路层运行，是一个多端口网桥。

交换机中维护一张 Port-MAC 映射表，记录每个端口上的主机的 MAC 地址。

跟集线器相比，交换机记录每个端口上主机的 MAC 地址，每次转发数据时都只会发送到指定的端口，而不是广播到所有主机，效率高。

![image-20220121102202722](http://book.bikongge.com/sre/2024-linux/image-20220121102202722.png)

> 交换机就是按照两端传输信息的需要，用人工或设备自动的把要传输的信息，转发到符合要求的机器上。
>
> 交换机有很多接口，每个接口都有桥接的功能，可以连接在一个局域网。
>
> 交换也也被称为、==多端口网桥==

![image-20220121102438775](http://book.bikongge.com/sre/2024-linux/image-20220121102438775.png)

## 路由器

![image-20220120153344826](http://book.bikongge.com/sre/2024-linux/image-20220120153344826.png)

家用路由器、华为AR1200企业级路由器。

路由器工作在OSI模型的第三次、网络层。

从你想上网的步骤，理解路由器。

1.找中国电信、交钱，师傅去你家安装光猫

2、你买个路由器和光猫连接起来

3、在路由器设置中，可以动态、手动的设置你家里的一个LAN环境，局域网就有了，比如192.168.28.1。

> 路由：
>
> 指的是把数据从一个地方传到另一个地方的行为和动作； 路由器就是执行这些行为和动作的机器。

- 连通不同的网络，实现不同网络之间的互联，同时还可以隔离广播域
  - 可以把两个路由器桥接起来，跨网段通信。
  - 运营商给你安装的光猫，是开通的WAN口
- 路由器可以连接不同介质的线路，比如双绞线、无线、光纤等。
- 路由器可以自动选择数据传输的路线，并且维护成一个路由表。
  - 简单理解就是，你买了一个游戏机，从广东发货，最后到北京，中间路线是什么？
  - 你访问小电影网站，最终看到了葫芦娃舅爷爷的电影，数据是怎么传输过来，通过网线，通过路由器，最终到你笔记本的，这个路线就是路由的概念，其中经过了很多台机器，经过了很多的IP
  - 我们不需要像网络工程师一样，彻底搞清楚其中的所有细节，掌握这个网络通信的概念即可。

> 选择路由器的指标

1、cpu越强大，路由器的计算能力，路由查找能力越高（好比快递的路线选择）

2、内存越大越好，数据中转，存储能力更强

3、吞吐量，你在看小电影的时候，数据不断发给你的路由器，数据是一个个数据包组成的，吞吐量越高，在单位时间内可以转发的数据量就越大。

4、网络协议支持，常见的路由器都支持TCP/IP协议，也就是基本的上网功能，还有的路由器支持比如VPN，可以让你全局上网。

5、机器负载能力，路由器可支持连接的机器数量有限，连接的机器数量越多，数据转发的压力也就越大，不同路由器可支持连接的机器数量不一。

![router-lan](http://book.bikongge.com/sre/2024-linux/20180527192553774)

> 路由器功能图解

1、路由器运行在网络层，进行路由选择，根据IP地址收发数据包，使用方式一般都是路由器连接局域网+广域网。

2、常见路由器的功能如下

- 比如有四个接口的集线器
- NAT网络地址转换功能
- DHCP动态主机配置协议
- DNS域名解析服务
- 设置代理服务器
- 防火墙功能

3、路由器有一个WAN口，用于连接到广域网，然后通过路由器内部的集线器（几个LAN口）连接其他设备。

4、借助DHCP、NAT功能，因此你家中所有的设备都可以通过一个唯一的公网IP访问到互联网。

## 网关

gateway是一个概念，是虚拟的，而路由器是实现这个概念的一个真实的机器。

一般路由器就提供网关的功能了。

网关是一个IP地址，是连接网络A到网络B之间的一个==关口==，作用是控制网络的入口、出口，是网络环境的边界。

![image-20220121113201856](http://book.bikongge.com/sre/2024-linux/image-20220121113201856.png)

> 一、什么是网关

网关(Gateway)又称网间连接器、协议转换器。网关在传输层上以实现网络互连，是最复杂的网络互连设备，仅用于两个高层协议不同的网络互连。

> 二、如何来理解网关

大家都知道，从一个房间走到另一个房间，必然要经过**一扇门**。同样，从一个网络向另一个网络发送信息，也必须经过一道“关口”，这道关口就是网关。顾名思义，网关(Gateway)就是一个网络连接到另一个网络的“**关口**”。

按照不同的分类标准，网关也有很多种。TCP/IP协议里的网关是最常用的，在这里我们所讲的“网关”均指TCP/IP协议下的网关。

> 三、网关的ip地址

**那么网关到底是什么呢？**

网关实质上是一个网络通向其他网络的IP地址，网关在网段内的可用**ip中选一个**，不过，一般用的是**第1个和最后一个**。

**例如**

比如有网络A和网络B，

**网络A：** 的IP地址范围为“192.168.1.1~192. 168.1.254”，子网掩255.255.255.0；

如果需要与其它网段通信，那么它的网关可以设置为192.168.1.1，当然也可以设置为**网段内**其它的一个ip地址。

**网络B：** 的IP地址范为“192.168.2.1~192.168.2.254”，子网掩码255.255.255.0。

如果需要与其它网段通信，那么它的网关可以设置为192.168.2.1，当然也可以设置为**网段内**其它的一个ip地址。

> 四、网关是如何实现通信？

在没有**路由器**的情况下，不同的两个网络之间是**不能**进行TCP/IP通信的，即使是两个网络连接在同一台交换机(或集线器)上，TCP/IP协议也会根据子网掩码(255.255.255.0)判定两个网络中的主机处在不同的网络里。

而要实现这两个网络之间的通信，则**必须通过网关**。

![image-20220121114402144](http://book.bikongge.com/sre/2024-linux/image-20220121114402144.png)

如果**网络A**中的主机发现**数据包**的目的主机**不在**本地网络中，就把数据包转发给它**自己的网关**，再由网关转发给网络B的网关，网络B的网关再转发给网络B的某个主机(如附图所示)。网络B向网络A转发数据包的过程。

所以说，只有设置好网关的**IP地址**，TCP/IP协议才能实现不同网络之间的相互通信。

> 五、什么是默认网关？

如果搞清了什么是网关，默认网关也就好理解了。

就好像一个房间可以有多扇门一样，一台主机可以有多个网关。

**默认网关**的意思是一台主机如果找不到可用的网关，就把数据包发给默认**指定的网关**，由这个网关来处理数据包。现在**主机**使用的网关，一般指的是默认网关。

![image-20220121114632830](http://book.bikongge.com/sre/2024-linux/image-20220121114632830.png)

## 总结

1、单纯组件局域网，购买交换机即可，速度最快，最省事，其次是路由器，最后考虑HUB（集线器）；

2、价格一般是路由器最贵、然后交换机、其次集线器；

3、集线器、交换机的作用就是将一些机器组成了一个局域网；但是二者性能上有区别

- 集线器是共享带宽，性能低下；
- 交换机独享宽带

机器数量较多的话，会有明显使用区别感。

4、路由器作用是连接不同的网络，并且自动寻找网络中传输数据最合适的路径。

5、交换机和路由器的区别

- 交换机是OSI第二层、数据链路层的设备，通过MAC地址寻找机器；
- 路由器是OSI第三层、网络层设备，根据IP地址寻找机器；

6、 关于双绞线，就是网线，每条网线都有两端的水晶头，将多个网络设备进行连接，一般都是主机和交换机的连接；

7、光纤和网线对比，光纤的电磁绝缘性能更好，信号衰弱小，传输速度更快，举例更大，主要用在超远距离、布线特殊环境，要求抗电磁干扰的环境。并且传输速度更快、尺寸小，重量轻，数据可以发送到几百千米，因此价格昂贵。